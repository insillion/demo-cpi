{
	"info": {
		"_postman_id": "254709c2-9992-478c-b8c3-9c116c748ebd",
		"name": "carma CPI - multi location",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "1483832"
	},
	"item": [
		{
			"name": "1. Login",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var jsonData = JSON.parse(responseBody);\r",
							"postman.setEnvironmentVariable(\"token\", jsonData.data.token);\r",
							"\r",
							"pm.test(\"Auth API | Status: \" + jsonData.status + \" | \" + jsonData.txt , function () {\r",
							"\tpm.expect(jsonData.status).to.eql(0);\r",
							"});\r",
							"\r",
							"pm.test(\"Token generated for \" + jsonData.data.email, function () {\r",
							"\tconst responseJson = pm.response.json();\r",
							"\tpm.expect(responseJson.data.token).to.not.be.empty;\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"email\": {{user_name}},\r\n    \"pwd\": {{password}}\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{host}}v1/auth",
					"host": [
						"{{host}}v1"
					],
					"path": [
						"auth"
					]
				},
				"description": "# POST /api/v1/auth\n\nThis `auth` endpoint allows users to authenticate and obtain access to Carma's Insurance policy issuance system.\n\nBy default, the auth token remains valid for 15 minutes (idle period). To extend this duration for each user, kindly reach out to the admin/Carma.\n\nWe recommend making the auth request prior to each transaction.\n\n#### Request Body Parameters\n\n- `email` (string, required): The email address of the user.\n    \n- `pwd` (string, required): The password of the user.\n    \n\nThe token from this request's response is used for subsequent API calls.\n\nPlease reach out to [sales@carma365.com](https://mailto:sales@carma365.com) to obtain Testing and/or Production credentials.\n\n**Response**:\n\n| Key | Description |\n| --- | --- |\n| status | The status of the response. 0 indicates success. |\n| txt | Error message, if any. |\n| token | System generated token to access other APIs. |\n| email | The email of the logged-in user. |\n\n_**By default â€“ Tokens are configured to be valid for 15 minute sessions. To extend this duration, kindly reach out to**_ [<i><b>sales@carma365.com</b></i>](https://mailto:sales@carma365.com)_**.**_"
			},
			"response": []
		},
		{
			"name": "2. Premium Calc",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "in-auth-token",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"inputs\": {\r\n    \"wf_id\": \"{{wf_id}}\",\r\n    \"product_id\": \"{{product_id}}\",\r\n    \"quote_id\": \"\",\r\n    \"line_of_business_tag\": \"COMMERCIAL PROPERTY\",\r\n    \"transaction_stage\": \"Quote\",\r\n    \"policy_start_date\": {{start_date}},\r\n    \"building_improvements_wiring\": \"No\",\r\n    \"building_improvements_roofing\": \"No\",\r\n    \"building_improvements_plumbing\": \"No\",\r\n    \"building_improvements_heating\": \"No\",\r\n    \"building_improvements_other\": \"No\",\r\n    \"applicant_information\": [],\r\n    \"premises_information\": [\r\n        {\r\n            \"pi_loc_no\": \"1\",\r\n            \"pi_building_no\": \"1\",\r\n            \"pi_street\": \"11941 Vose Street\",\r\n            \"pi_city\": \"North Hollywood\",\r\n            \"pi_state\": \"CA\",\r\n            \"pi_zipcode\": \"91605\",\r\n            \"pi_occupied_area\": \"100%\",\r\n            \"pi_total_building\": \"21\",\r\n            \"pi_area_leased\": \"894\",\r\n            \"index\": 0            \r\n        }\r\n    ],\r\n    \"loss_run_details\": [],\r\n    \"multi_location\": [\r\n        {\r\n            \"loc_location_no\": \"1\",\r\n            \"loc_building_number\": \"1\",\r\n            \"loc_premises_number\": \"102\",\r\n            \"loc_street_address\": \"11941 Vose Street\\t\",\r\n            \"loc_zipcode\": \"91605\",\r\n            \"loc_building_description\": \"Light manufacturing\",\r\n            \"loc_total_si\": 2000000,\r\n            \"loc_fetch_basepremium\": 2600,\r\n            \"loc_fetch_addonpremium\": 0.04,\r\n            \"loc_location_premium\": 2600.04,\r\n            \"index\": 0,         \r\n            \"err\": \"\"\r\n        }\r\n    ],\r\n    \"premises_details\": [\r\n        {\r\n            \"premises_location_no\": \"1\",\r\n            \"premises_details_subject_of_insurance\": \"Business Personal Property Coverage\",\r\n            \"premises_details_amount\": 2000000,\r\n            \"premises_details_coins_perc\": \"20\",\r\n            \"premises_details_valuation\": \"1\",\r\n            \"premises_details_causes_of_loss\": \"Basic\",\r\n            \"premises_details_deductible\": \"1000\",\r\n            \"premises_details_ded_type\": \"Group 1\",\r\n            \"baserate\": \"0.15\",\r\n            \"rate2\": 0.13,\r\n            \"cover_base_premium\": 2600,\r\n            \"index\": 0\r\n        }\r\n    ],\r\n    \"mandatory_cover\": [\r\n        {\r\n            \"mandatory_cover_name\": \"Burglary Cover\",\r\n            \"mandatory_cover_opted\": \"Yes\",\r\n            \"mandatory_cover_limit\": \"20\",\r\n            \"mandatory_cover_rate\": 0.2,\r\n            \"mandatory_cover_premium\": 0.04,\r\n            \"uid\": \"[onzc/\",\r\n            \"added\": true,\r\n            \"index\": 0\r\n        }\r\n    ],\r\n    \"premium_value\": 2600.04,\r\n    \"base_prem\": 2600,\r\n    \"total_premium\": 2730.042,\r\n    \"tax\": 130.002,\r\n    \"total_base_premium\": 2600,\r\n    \"pc_errormessage\": \"V001 - Protection Class field is Mandatory. Please select a value\",\r\n    \"total_additional_cover_premium\": 0.04,\r\n    \"start_date\": \"08/29/2025\",\r\n    \"avp_uw_condition\": \"N\",\r\n    \"jr_uw_condition\": \"N\",\r\n    \"multi_loc_total_addon_premium\": 0.04,\r\n    \"multi_loc_total_base_premium\": 2600,\r\n    \"multi_loc_total_location_premium\": 2600.04,\r\n    \"policy_end_date\": {{end_date}},\r\n    \"pro_rata_days\": 365,\r\n    \"sr_uw_condition\": \"N\",\r\n    \"subtext_end_date\": \"08/28/2026\",\r\n    \"total_additional_cover\": 0.04,\r\n    \"total_amount\": 2000000,\r\n    \"total_mandatory_additional_cover\": 0.04,\r\n    \"computed_premium_value\": 2600.04,\r\n    \"policy_start_time\": null,\r\n    \"total_tax\": 130,\r\n    \"charges\": {\r\n        \"total\": 0,\r\n        \"tax_total\": 0,\r\n        \"charge_parts\": [],\r\n        \"error\": null\r\n    },\r\n    \"email\": \"cpiagent@insillion.com\",\r\n    \"agent_email\": \"agent@insillion.com\",\r\n    \"agency_customer_id\": \"\"\r\n    },\r\n    \"outputs\": [\r\n        \"premium_value\",\r\n        \"nstp_flag\"\r\n    ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{host}}/v1/product/calc/{{product_id}}?wf_id={{wf_id}}&type=premium_calc",
					"host": [
						"{{host}}"
					],
					"path": [
						"v1",
						"product",
						"calc",
						"{{product_id}}"
					],
					"query": [
						{
							"key": "wf_id",
							"value": "{{wf_id}}"
						},
						{
							"key": "type",
							"value": "premium_calc"
						}
					]
				},
				"description": "### API Endpoint: Premium Calculation\n\nThis endpoint allows users to create a new insurance quote based on the provided parameters. It is primarily used for generating quotes in the context of commercial property insurance.\n\n#### Request Format\n\n- **Method**: POST\n    \n- **URL**: `{{host}}v1/proudct/calc`\n    \n- **Content-Type**: application/json\n    \n\n#### Request Body\n\nThe request body must be in JSON format and should include the following fields:\n\n- `wf_id` (string): The workflow identifier.\n    \n- `product_id` (string): The identifier for the product.\n    \n- `quote_id` (string): The identifier for the quote (can be empty for new quotes).\n    \n- `line_of_business_tag` (string): The tag indicating the line of business (e.g., \"COMMERCIAL PROPERTY\").\n    \n- `transaction_stage` (string): The current stage of the transaction (e.g., \"Quote\").\n    \n- `policy_start_date` (object): The start date of the policy (should be formatted accordingly).\n    \n\n**Example Request Body**:\n\n``` json\n{\n  \"wf_id\": \"6\",\n  \"product_id\": \"M000000000002\",\n  \"quote_id\": \"\",\n  \"line_of_business_tag\": \"COMMERCIAL PROPERTY\",\n  \"transaction_stage\": \"Quote\",\n  \"policy_start_date\": {}\n}\n\n ```\n\n#### Response Format\n\nOn a successful request, the API will return a JSON response with the following structure:\n\n- `status` (integer): The status of the request (0 indicates success).\n    \n- `txt` (string): A message related to the status.\n    \n- `data` (array): An array containing details about the created quote and associated entities, including:\n    \n    - `policy_id`: Identifier for the policy.\n        \n    - `product_id`: Identifier for the product.\n        \n    - `quote_id`: Identifier for the quote.\n        \n    - `premium_value`: The calculated premium value.\n        \n    - `quote`: An object containing detailed information about the quote, including customer information, coverage details, and more.\n        \n\n**Example Response**:\n\n``` json\n{\n  \"status\": 0,\n  \"txt\": \"\",\n  \"data\": [\n    {\n      \"policy_id\": \"\",\n      \"product_id\": \"\",\n      \"quote_id\": \"\",\n      \"premium_value\": 0,\n      \"quote\": {\n        // quote details here\n      }\n    }\n  ]\n}\n\n ```\n\nThis endpoint is essential for initiating the insurance quoting process and will return all relevant details needed for further processing or user interaction."
			},
			"response": []
		},
		{
			"name": "2.1. Quote Save",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();\r",
							"\r",
							"pm.test(pm.info.requestName + \" | Status: \" + jsonData.status + \" | \" + jsonData.txt, function () {\r",
							"    pm.expect(jsonData.status).to.eql(0);\r",
							"});\r",
							"\r",
							"if (!jsonData.status) {\r",
							"    postman.setEnvironmentVariable(\"quote_id\", jsonData.data[0].quote_id);\r",
							"    postman.setEnvironmentVariable(\"policy_id\", jsonData.data[0].policy_id);\r",
							"    postman.setEnvironmentVariable(\"premium\", jsonData.data[0].quote.data.premium_value);\r",
							"    //postman.setEnvironmentVariable(\"premium\", jsonData.data[0].quote.data.billed_premium\r",
							"    postman.setEnvironmentVariable(\"first_name\", jsonData.data[0].quote.data.first_name);\r",
							"    postman.setEnvironmentVariable(\"last_name\", jsonData.data[0].quote.data.last_name);\r",
							"    postman.setEnvironmentVariable(\"payment_id\", jsonData.data[0].payment_id);\r",
							"    postman.setEnvironmentVariable(\"total_amount\", jsonData.data[0].quote.data.total_amount);\r",
							"    postman.setEnvironmentVariable(\"document_id\", jsonData.data[0].document.document_id);\r",
							"    postman.setEnvironmentVariable(\"wf_id\");\r",
							"    pm.test(\"Quote id generated \" + jsonData.data[0].quote_id, function () {\r",
							"        pm.expect(jsonData.data[0].quote_id).to.not.be.empty;\r",
							"    });\r",
							"\r",
							"    pm.test(\"Premium Value above Zero | \" + jsonData.data[0].quote.data.premium_value, function () {\r",
							"        pm.expect(jsonData.data[0].quote.data.premium_value).to.be.above(0);\r",
							"    });\r",
							"    pm.test(\"document id generated | \" + jsonData.data[0].document_id, function () {\r",
							"         pm.expect(jsonData.data[0].document_id).to.not.be.empty;\r",
							"         postman.setEnvironmentVariable(\"doc_id\",jsonData.data[0].document_id);\r",
							"    });\r",
							"}"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "Accept-Language",
						"value": "en-US,en;q=0.9"
					},
					{
						"key": "Cache-Control",
						"value": "no-cache"
					},
					{
						"key": "Connection",
						"value": "keep-alive"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Origin",
						"value": "https://carma.sb.insillion.com"
					},
					{
						"key": "Pragma",
						"value": "no-cache"
					},
					{
						"key": "Referer",
						"value": "https://carma.sb.insillion.com/bb1/policy?product_id=M000000000002"
					},
					{
						"key": "Sec-Fetch-Dest",
						"value": "empty"
					},
					{
						"key": "Sec-Fetch-Mode",
						"value": "cors"
					},
					{
						"key": "Sec-Fetch-Site",
						"value": "same-origin"
					},
					{
						"key": "User-Agent",
						"value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
					},
					{
						"key": "in-auth-token",
						"value": "{{token}}"
					},
					{
						"key": "sec-ch-ua",
						"value": "\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\""
					},
					{
						"key": "sec-ch-ua-mobile",
						"value": "?0"
					},
					{
						"key": "sec-ch-ua-platform",
						"value": "\"Windows\""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"wf_id\": \"{{wf_id}}\",\r\n    \"product_id\": \"{{product_id}}\",\r\n    \"quote_id\": \"\",\r\n    \"line_of_business_tag\": \"COMMERCIAL PROPERTY\",\r\n    \"transaction_stage\": \"Quote\",\r\n    \"policy_start_date\": {{start_date}},\r\n    \"building_improvements_wiring\": \"No\",\r\n    \"building_improvements_roofing\": \"No\",\r\n    \"building_improvements_plumbing\": \"No\",\r\n    \"building_improvements_heating\": \"No\",\r\n    \"building_improvements_other\": \"No\",\r\n    \"applicant_information\": [],\r\n    \"premises_information\": [\r\n        {\r\n            \"pi_loc_no\": \"1\",\r\n            \"pi_building_no\": \"1\",\r\n            \"pi_street\": \"11941 Vose Street\",\r\n            \"pi_city\": \"North Hollywood\",\r\n            \"pi_state\": \"CA\",\r\n            \"pi_zipcode\": \"91605\",\r\n            \"pi_occupied_area\": \"100%\",\r\n            \"pi_total_building\": \"21\",\r\n            \"pi_area_leased\": \"894\",\r\n            \"index\": 0            \r\n        }\r\n    ],\r\n    \"loss_run_details\": [],\r\n    \"multi_location\": [\r\n        {\r\n            \"loc_location_no\": \"1\",\r\n            \"loc_building_number\": \"1\",\r\n            \"loc_premises_number\": \"102\",\r\n            \"loc_street_address\": \"11941 Vose Street\\t\",\r\n            \"loc_zipcode\": \"91605\",\r\n            \"loc_building_description\": \"Light manufacturing\",\r\n            \"loc_total_si\": 2000000,\r\n            \"loc_fetch_basepremium\": 2600,\r\n            \"loc_fetch_addonpremium\": 0.04,\r\n            \"loc_location_premium\": 2600.04,\r\n            \"index\": 0,         \r\n            \"err\": \"\"\r\n        }\r\n    ],\r\n    \"premises_details\": [\r\n        {\r\n            \"premises_location_no\": \"1\",\r\n            \"premises_details_subject_of_insurance\": \"Business Personal Property Coverage\",\r\n            \"premises_details_amount\": 2000000,\r\n            \"premises_details_coins_perc\": \"20\",\r\n            \"premises_details_valuation\": \"1\",\r\n            \"premises_details_causes_of_loss\": \"Basic\",\r\n            \"premises_details_deductible\": \"1000\",\r\n            \"premises_details_ded_type\": \"Group 1\",\r\n            \"baserate\": \"0.15\",\r\n            \"rate2\": 0.13,\r\n            \"cover_base_premium\": 2600,\r\n            \"index\": 0\r\n        }\r\n    ],\r\n    \"mandatory_cover\": [\r\n        {\r\n            \"mandatory_cover_name\": \"Burglary Cover\",\r\n            \"mandatory_cover_opted\": \"Yes\",\r\n            \"mandatory_cover_limit\": \"20\",\r\n            \"mandatory_cover_rate\": 0.2,\r\n            \"mandatory_cover_premium\": 0.04,\r\n            \"uid\": \"[onzc/\",\r\n            \"added\": true,\r\n            \"index\": 0\r\n        }\r\n    ],\r\n    \"premium_value\": 2600.04,\r\n    \"base_prem\": 2600,\r\n    \"total_premium\": 2730.042,\r\n    \"tax\": 130.002,\r\n    \"total_base_premium\": 2600,\r\n    \"pc_errormessage\": \"V001 - Protection Class field is Mandatory. Please select a value\",\r\n    \"total_additional_cover_premium\": 0.04,\r\n    \"start_date\": \"08/29/2025\",\r\n    \"avp_uw_condition\": \"N\",\r\n    \"jr_uw_condition\": \"N\",\r\n    \"multi_loc_total_addon_premium\": 0.04,\r\n    \"multi_loc_total_base_premium\": 2600,\r\n    \"multi_loc_total_location_premium\": 2600.04,\r\n    \"policy_end_date\": {{end_date}},\r\n    \"pro_rata_days\": 365,\r\n    \"sr_uw_condition\": \"N\",\r\n    \"subtext_end_date\": \"08/28/2026\",\r\n    \"total_additional_cover\": 0.04,\r\n    \"total_amount\": 2000000,\r\n    \"total_mandatory_additional_cover\": 0.04,\r\n    \"computed_premium_value\": 2600.04,\r\n    \"policy_start_time\": null,\r\n    \"total_tax\": 130,\r\n    \"charges\": {\r\n        \"total\": 0,\r\n        \"tax_total\": 0,\r\n        \"charge_parts\": [],\r\n        \"error\": null\r\n    },\r\n    \"email\": \"cpiagent@insillion.com\",\r\n    \"agent_email\": \"agent@insillion.com\",\r\n    \"agency_customer_id\": \"\"\r\n}"
				},
				"url": {
					"raw": "{{host}}v1/quote",
					"host": [
						"{{host}}v1"
					],
					"path": [
						"quote"
					]
				},
				"description": "### API Endpoint: Create Quote\n\nThis endpoint allows users to create a new insurance quote based on the provided parameters. It is primarily used for generating quotes in the context of commercial property insurance.\n\n#### Request Format\n\n- **Method**: POST\n    \n- **URL**: `{{host}}v1/quote`\n    \n- **Content-Type**: application/json\n    \n\n#### Request Body\n\nThe request body must be in JSON format and should include the following fields:\n\n- `wf_id` (string): The workflow identifier.\n    \n- `product_id` (string): The identifier for the product.\n    \n- `quote_id` (string): The identifier for the quote (can be empty for new quotes).\n    \n- `line_of_business_tag` (string): The tag indicating the line of business (e.g., \"COMMERCIAL PROPERTY\").\n    \n- `transaction_stage` (string): The current stage of the transaction (e.g., \"Quote\").\n    \n- `policy_start_date` (object): The start date of the policy (should be formatted accordingly).\n    \n\n**Example Request Body**:\n\n``` json\n{\n  \"wf_id\": \"6\",\n  \"product_id\": \"M000000000002\",\n  \"quote_id\": \"\",\n  \"line_of_business_tag\": \"COMMERCIAL PROPERTY\",\n  \"transaction_stage\": \"Quote\",\n  \"policy_start_date\": {}\n}\n\n ```\n\n#### Response Format\n\nOn a successful request, the API will return a JSON response with the following structure:\n\n- `status` (integer): The status of the request (0 indicates success).\n    \n- `txt` (string): A message related to the status.\n    \n- `data` (array): An array containing details about the created quote and associated entities, including:\n    \n    - `policy_id`: Identifier for the policy.\n        \n    - `product_id`: Identifier for the product.\n        \n    - `quote_id`: Identifier for the quote.\n        \n    - `premium_value`: The calculated premium value.\n        \n    - `quote`: An object containing detailed information about the quote, including customer information, coverage details, and more.\n        \n\n**Example Response**:\n\n``` json\n{\n  \"status\": 0,\n  \"txt\": \"\",\n  \"data\": [\n    {\n      \"policy_id\": \"\",\n      \"product_id\": \"\",\n      \"quote_id\": \"\",\n      \"premium_value\": 0,\n      \"quote\": {\n        // quote details here\n      }\n    }\n  ]\n}\n\n ```\n\nThis endpoint is essential for initiating the insurance quoting process and will return all relevant details needed for further processing or user interaction."
			},
			"response": []
		},
		{
			"name": "2.2. Quote Finalize",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();\r",
							"\r",
							"pm.test(pm.info.requestName + \" | Status: \" + jsonData.status + \" | \" + jsonData.txt, function () {\r",
							"    pm.expect(jsonData.status).to.eql(0);\r",
							"});\r",
							"\r",
							"if (!jsonData.status) {\r",
							"    postman.setEnvironmentVariable(\"quote_id\", jsonData.data[0].quote_id);\r",
							"    postman.setEnvironmentVariable(\"policy_id\", jsonData.data[0].policy_id);\r",
							"    postman.setEnvironmentVariable(\"premium\", jsonData.data[0].quote.data.premium_value);\r",
							"    //postman.setEnvironmentVariable(\"premium\", jsonData.data[0].quote.data.billed_premium\r",
							"    postman.setEnvironmentVariable(\"first_name\", jsonData.data[0].quote.data.first_name);\r",
							"    postman.setEnvironmentVariable(\"last_name\", jsonData.data[0].quote.data.last_name);\r",
							"    postman.setEnvironmentVariable(\"payment_id\", jsonData.data[0].payment_id);\r",
							"    postman.setEnvironmentVariable(\"total_amount\", jsonData.data[0].quote.data.total_amount);\r",
							"    postman.setEnvironmentVariable(\"document_id\", jsonData.data[0].document.document_id);\r",
							"   postman.setEnvironmentVariable(\"data_id\", jsonData.data[0].quote.data[\"12003\"]);\r",
							"\r",
							"\r",
							"    pm.test(\"Quote id generated \" + jsonData.data[0].quote_id, function () {\r",
							"        pm.expect(jsonData.data[0].quote_id).to.not.be.empty;\r",
							"    });\r",
							"\r",
							"    pm.test(\"Premium Value above Zero | \" + jsonData.data[0].quote.data.premium_value, function () {\r",
							"        pm.expect(jsonData.data[0].quote.data.premium_value).to.be.above(0);\r",
							"    });\r",
							"    pm.test(\"document id generated | \" + jsonData.data[0].document_id, function () {\r",
							"         pm.expect(jsonData.data[0].document_id).to.not.be.empty;\r",
							"         postman.setEnvironmentVariable(\"doc_id\",jsonData.data[0].document_id);\r",
							"    });\r",
							"}"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "Accept-Language",
						"value": "en-US,en;q=0.9"
					},
					{
						"key": "Cache-Control",
						"value": "no-cache"
					},
					{
						"key": "Connection",
						"value": "keep-alive"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Origin",
						"value": "https://carma.sb.insillion.com"
					},
					{
						"key": "Pragma",
						"value": "no-cache"
					},
					{
						"key": "Referer",
						"value": "https://carma.sb.insillion.com/bb1/policy?policy_id=P000000000012"
					},
					{
						"key": "Sec-Fetch-Dest",
						"value": "empty"
					},
					{
						"key": "Sec-Fetch-Mode",
						"value": "cors"
					},
					{
						"key": "Sec-Fetch-Site",
						"value": "same-origin"
					},
					{
						"key": "User-Agent",
						"value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
					},
					{
						"key": "in-auth-token",
						"value": "{{token}}"
					},
					{
						"key": "sec-ch-ua",
						"value": "\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\""
					},
					{
						"key": "sec-ch-ua-mobile",
						"value": "?0"
					},
					{
						"key": "sec-ch-ua-platform",
						"value": "\"Windows\""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"wf_id\": \"6\",\r\n    \"product_id\": \"{{product_id}}\",\r\n    \"quote_id\": \"{{quote_id}}\",\r\n    \"line_of_business_tag\": \"COMMERCIAL PROPERTY\",\r\n    \"transaction_stage\": \"Quote\",   \r\n    \"policy_start_date\": {{start_date}},\r\n    \"building_improvements_wiring\": \"No\",\r\n    \"building_improvements_roofing\": \"No\",\r\n    \"building_improvements_plumbing\": \"No\",\r\n    \"building_improvements_heating\": \"No\",\r\n    \"building_improvements_other\": \"No\",\r\n    \"premises_information\": [\r\n        {\r\n            \"pi_loc_no\": \"1\",\r\n            \"pi_building_no\": \"1\",\r\n            \"pi_street\": \"11941 Vose Street\",\r\n            \"pi_city\": \"North Hollywood\",\r\n            \"pi_state\": \"CA\",\r\n            \"pi_zipcode\": \"91605\",\r\n            \"pi_occupied_area\": \"100%\",\r\n            \"pi_total_building\": \"21\",\r\n            \"pi_area_leased\": \"894\",\r\n            \"index\": 0,\r\n            \"uid\": \"yBdYs5\"\r\n        }\r\n    ],\r\n    \"multi_location\": [\r\n        {\r\n            \"loc_location_no\": \"1\",\r\n            \"loc_building_number\": \"1\",\r\n            \"loc_premises_number\": \"102\",\r\n            \"loc_street_address\": \"11941 Vose Street\\t\",\r\n            \"loc_zipcode\": \"91605\",\r\n            \"loc_building_description\": \"Light manufacturing\",\r\n            \"loc_total_si\": 2000000,\r\n            \"loc_fetch_basepremium\": 2600,\r\n            \"loc_fetch_addonpremium\": 0.04,\r\n            \"loc_location_premium\": 2600.04,\r\n            \"index\": 0,\r\n            \"uid\": \"vJb3dq\",\r\n            \"err\": \"\"\r\n        }\r\n    ],\r\n    \"premises_details\": [\r\n        {\r\n            \"premises_location_no\": \"1\",\r\n            \"premises_details_subject_of_insurance\": \"Business Personal Property Coverage\",\r\n            \"premises_details_amount\": 2000000,\r\n            \"premises_details_coins_perc\": \"20\",\r\n            \"premises_details_valuation\": \"1\",\r\n            \"premises_details_causes_of_loss\": \"Basic\",\r\n            \"premises_details_deductible\": \"1000\",\r\n            \"premises_details_ded_type\": \"Group 1\",\r\n            \"baserate\": \"0.15\",\r\n            \"rate2\": 0.13,\r\n            \"cover_base_premium\": 2600\r\n        }\r\n    ],\r\n    \"mandatory_cover\": [\r\n        {\r\n            \"mandatory_cover_name\": \"Burglary Cover\",\r\n            \"mandatory_cover_opted\": \"Yes\",\r\n            \"mandatory_cover_limit\": \"20\",\r\n            \"mandatory_cover_rate\": 0.2,\r\n            \"mandatory_cover_premium\": 0.04,\r\n            \"uid\": \"[onzc/\",\r\n            \"added\": true,\r\n            \"index\": 0\r\n        }\r\n    ],\r\n    \"premium_value\": 2600.04,\r\n    \"base_prem\": 2600,\r\n    \"total_premium\": 2730.042,\r\n    \"tax\": 130.002,\r\n    \"total_base_premium\": 2600,\r\n    \"condition3\": 1,\r\n    \"pc_errormessage\": \"V001 - Protection Class field is Mandatory. Please select a value\",\r\n    \"total_additional_cover_premium\": 0.04,\r\n    \"condition3_level\": 3,\r\n    \"start_date\": \"{{start_date}}\",\r\n    \"avp_uw_condition\": \"N\",\r\n    \"jr_uw_condition\": \"N\",\r\n    \"multi_loc_total_addon_premium\": 0.04,\r\n    \"multi_loc_total_base_premium\": 2600,\r\n    \"multi_loc_total_location_premium\": 2600.04,\r\n    \"policy_end_date\": {{end_date}},\r\n    \"pro_rata_days\": 365,\r\n    \"sr_uw_condition\": \"N\",\r\n    \"subtext_end_date\": \"08/28/2026\",\r\n    \"total_additional_cover\": 0.04,\r\n    \"total_amount\": \"2730.04\",\r\n    \"total_mandatory_additional_cover\": 0.04,\r\n    \"computed_premium_value\": 2600.04,\r\n    \"policy_start_time\": null,\r\n    \"total_tax\": 130,\r\n    \"subpolicies\": {},\r\n    \"charges\": {\r\n        \"total\": 0,\r\n        \"tax_total\": 0,\r\n        \"charge_parts\": [],\r\n        \"error\": null\r\n    },\r\n    \"email\": \"cpiagent@insillion.com\",\r\n    \"agent_email\": \"agent@insillion.com\",\r\n    \"product_name\": \"Commercial Property Insurance - Multi Location\",\r\n    \"product_desc\": \"Commercial Property Insurance(Add on)\",\r\n    \"product_group_id\": \"PG000000000001\",\r\n    \"par_product_id\": \"M000000000003\",\r\n    \"product_group_name\": \"Property\",\r\n    \"product_group_code\": \"P001\",\r\n    \"catalog\": [],\r\n    \"policywordings\": [],\r\n    \"policy_id\": \"P000000000012\",\r\n    \"hh_address\": \"1096 Main St, Branford, CT, 06405\",\r\n    \"nstp_level\": 0,\r\n    \"_ready\": \"1\",\r\n    \"agent_broker_code\": \"7896\",\r\n    \"agent_broker_id\": \"BR000000000002\",\r\n    \"agent_name\": \"agent\",\r\n    \"agent_deposit_balance\": \"10000000000000.0000\",\r\n    \"broker_code\": \"7896\",\r\n    \"agent_code\": \"null\",\r\n    \"broker_id\": \"BR000000000002\",\r\n    \"broker_name\": \"Broker Agent\",\r\n    \"broker_group_id\": \"G000000000007\",\r\n    \"broker_deposit_balance_mode\": \"broker\",\r\n    \"uuid\": \"a2adb807-70d4-47d8-925a-c8de9cae71d7\",\r\n    \"author\": \"agent@insillion.com\",\r\n    \"ip\": \"\\\\proxy_add_x_forwarded_for\",\r\n    \"c_start_date\": \"2025-08-29\",\r\n    \"c_end_date\": \"2026-08-28\",\r\n    \"premium_calc_html_version\": 4,\r\n    \"proposal_form_html_version\": 4,\r\n    \"premium_calc_js_version\": 4,\r\n    \"proposal_form_js_version\": 4,\r\n    \"quote_valid\": 1,\r\n    \"total_charges\": 0,\r\n    \"error_count\": 0,\r\n    \"__finalize\": 1\r\n}"
				},
				"url": {
					"raw": "{{host}}v1/quote",
					"host": [
						"{{host}}v1"
					],
					"path": [
						"quote"
					]
				},
				"description": "## API Endpoint : Quote Finalize\n\nThis endpoint allows users to create a new quote for a specified product within the system. The request must include various parameters that define the quote details, and upon successful execution, it returns a structured response containing information about the created quote and associated entities.\n\n### Request Parameters\n\nThe request is sent as a JSON object with the following parameters:\n\n- **wf_id** (string): The workflow ID associated with the quote.\n    \n- **product_id** (string): The unique identifier for the product being quoted.\n    \n- **quote_id** (string): The ID of the quote being created or referenced.\n    \n- **line_of_business_tag** (string): The tag indicating the line of business, e.g., \"COMMERCIAL PROPERTY\".\n    \n- **transaction_stage** (string): The current stage of the transaction, which should be \"Quote\".\n    \n- **application_date** (integer): The date of the application represented as a timestamp.\n    \n- **policy_start_date** (object): An object representing the start date of the policy (currently empty in the example).\n    \n\n### Expected Response\n\nOn a successful request, the API responds with a status code of `200` and a JSON object containing:\n\n- **status** (integer): Indicates the success or failure of the request (0 for success).\n    \n- **data** (array): An array of objects containing detailed information about the quote and related entities, including:\n    \n    - **policy_id** (string): The ID of the policy created.\n        \n    - **product_id** (string): The ID of the product associated with the quote.\n        \n    - **quote_id** (string): The ID of the quote.\n        \n    - **premium_value** (number): The calculated premium value for the quote.\n        \n    - **quote** (object): Contains detailed information about the quote, including customer details, coverage options, and more.\n        \n\n### Notes\n\n- Ensure that all required parameters are included in the request body to avoid errors.\n    \n- The response may contain additional nested objects and arrays that provide comprehensive details about the quote and its associated data.\n    \n- Users should handle the response appropriately, especially when processing the `data` array for further actions or displays.\n    \n\nThis endpoint is essential for managing quotes in the system, particularly for commercial property insurance transactions."
			},
			"response": []
		},
		{
			"name": "3. Confirm Payment",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();\r",
							"\r",
							"pm.test(pm.info.requestName + \" | Status: \" + jsonData.status + \" | \" + \"Payment Completed Successfully\", function () {\r",
							"    pm.expect(jsonData.status).to.eql(0);\r",
							"\r",
							"});\r",
							"\r",
							"pm.test(\"quote_no=\"+ jsonData.data[0].quote_no,function (){ pm.expect(jsonData.status).to.eql(0);})\r",
							"pm.test(\"policy_no=\"+ jsonData.data[0].policy_no,function (){ pm.expect(jsonData.status).to.eql(0);})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "in-auth-token",
						"value": "{{token}}"
					},
					{
						"key": "sec-ch-ua-platform",
						"value": "\"Windows\""
					},
					{
						"key": "Cache-Control",
						"value": "no-cache"
					},
					{
						"key": "Referer",
						"value": "https://idemo.insillion.com/bb1/policy?policy_id=P000000002149"
					},
					{
						"key": "Pragma",
						"value": "no-cache"
					},
					{
						"key": "sec-ch-ua",
						"value": "\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\", \"Google Chrome\";v=\"138\""
					},
					{
						"key": "sec-ch-ua-mobile",
						"value": "?0"
					},
					{
						"key": "User-Agent",
						"value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
					},
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"key\": \"{{payment_id}}\",\r\n    \"amount\": {{total_amount}}\r\n}"
				},
				"url": {
					"raw": "{{host}}v1/payment/cash",
					"host": [
						"{{host}}v1"
					],
					"path": [
						"payment",
						"cash"
					]
				},
				"description": "## API Endpoint: Add Cash Payment\n\nThis endpoint allows users to add a cash payment to their account.\n\n### Request Method\n\n`POST`\n\n### Endpoint\n\n`{{host}}v1/payment/cash`\n\n### Request Body\n\nThe request body should be sent in JSON format and must include the following parameters:\n\n- **key** (string): The unique identifier for the payment (e.g., payment ID).\n    \n- **amount** (object): The amount associated with the payment. This should be a valid object representing the payment amount.\n    \n\n### Expected Response\n\nOn a successful request, the API will return a response indicating the status of the cash payment addition. The response format will typically include a confirmation message and may also include additional details related to the transaction.\n\nEnsure that the `key` and `amount` fields are correctly populated to avoid errors in processing the payment."
			},
			"response": []
		},
		{
			"name": "4. View Policy",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "in-auth-token",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{host}}/v1/policy?policy_id={{policy_id}}",
					"host": [
						"{{host}}"
					],
					"path": [
						"v1",
						"policy"
					],
					"query": [
						{
							"key": "policy_id",
							"value": "{{policy_id}}"
						}
					]
				},
				"description": "### API Endpoint: View Quote\n\nThis endpoint retrieves the details of a specific insurance policy based on the provided `policy_id`.\n\n### Request\n\n- **Method**: GET\n    \n- **URL**: `{{host}}/v1/policy?policy_id={{policy_id}}`\n    \n\n#### Query Parameters\n\n- `policy_id` (string): The unique identifier of the policy you wish to retrieve. This parameter is required.\n    \n\n### Response\n\nThe response will return a JSON object containing the status of the request and the details of the requested policy.\n\n#### Response Structure\n\n- **status** (integer): Indicates the success or failure of the request. A value of `0` typically indicates success.\n    \n- **txt** (string): A text field that may contain additional information about the request status (usually empty).\n    \n- **data** (array): An array containing the policy details, where each policy object may include the following fields:\n    \n    - `policy_id` (string): The unique identifier of the policy.\n        \n    - `product_id` (string): The identifier of the product associated with the policy.\n        \n    - `wf_id` (integer): Workflow ID related to the policy.\n        \n    - `customer_id` (string): The ID of the customer associated with the policy.\n        \n    - `policy_no` (string|null): The policy number, which may be null if not assigned.\n        \n    - `issue_date` (string|null): The date the policy was issued.\n        \n    - `policy_start_date` (string): The start date of the policy coverage.\n        \n    - `policy_end_date` (string): The end date of the policy coverage.\n        \n    - Additional fields related to quotes, documents, payments, and other relevant details.\n        \n\n### Notes\n\n- Ensure that the `policy_id` parameter is valid to receive the appropriate policy details.\n    \n- The response may contain nested objects with further details about quotes, payments, and documents associated with the policy.\n    \n- The structure of the response allows for extensibility, meaning additional fields may be included in future updates."
			},
			"response": []
		},
		{
			"name": "5. Download Quote PDF",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "Accept-Language",
						"value": "en-US,en;q=0.9"
					},
					{
						"key": "Cache-Control",
						"value": "no-cache"
					},
					{
						"key": "Connection",
						"value": "keep-alive"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Origin",
						"value": "https://carma.sb.insillion.com"
					},
					{
						"key": "Pragma",
						"value": "no-cache"
					},
					{
						"key": "Referer",
						"value": "https://carma.sb.insillion.com/bb1/policy?product_id=M000000000002"
					},
					{
						"key": "Sec-Fetch-Dest",
						"value": "empty"
					},
					{
						"key": "Sec-Fetch-Mode",
						"value": "cors"
					},
					{
						"key": "Sec-Fetch-Site",
						"value": "same-origin"
					},
					{
						"key": "User-Agent",
						"value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
					},
					{
						"key": "in-auth-token",
						"value": "{{token}}"
					},
					{
						"key": "sec-ch-ua",
						"value": "\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\""
					},
					{
						"key": "sec-ch-ua-mobile",
						"value": "?0"
					},
					{
						"key": "sec-ch-ua-platform",
						"value": "\"Windows\""
					}
				],
				"url": {
					"raw": "{{host}}/v1/quote/data/{{quote_id}}?data_id={{data_id}}&download=1",
					"host": [
						"{{host}}"
					],
					"path": [
						"v1",
						"quote",
						"data",
						"{{quote_id}}"
					],
					"query": [
						{
							"key": "data_id",
							"value": "{{data_id}}"
						},
						{
							"key": "download",
							"value": "1"
						}
					]
				},
				"description": "### API Endpoint : Download Quote PDF\n\nThis endpoint retrieves a specific quote's data in PDF format. It allows users to download the quote associated with a given `quote_id` and `data_id`.\n\n### Request Parameters\n\n- **quote_id** (path parameter): The unique identifier for the quote you wish to retrieve.\n    \n- **data_id** (query parameter): The identifier for the specific data related to the quote.\n    \n- **download** (query parameter): Set to `1` to indicate that the response should be a downloadable file.\n    \n\n### Expected Response\n\n- **Status Code**: `200 OK` indicates that the request was successful.\n    \n- **Content-Type**: `application/pdf` signifies that the response will be a PDF document containing the requested quote data.\n    \n\n### Notes\n\n- Ensure that both `quote_id` and `data_id` are valid and correspond to existing records in the system.\n    \n- The response will be a PDF file, and users should handle it accordingly to view or save the document."
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"const moment = require('moment');",
					"//pm.globals.set(\"Currentdate\", moment().format(\"MM/DD/YYYY\"));",
					"var e_date =  moment().add(365, 'days').format(\"YYYY-MM-DD\");",
					" ",
					"pm.collectionVariables.set (\"start_date\", moment().format(\"YYYY-MM-DD\"));",
					"pm.collectionVariables.set (\"end_date\", e_date);",
					"pm.collectionVariables.set (\"endr_start_date\", moment().format(\"YYYY-MM-DD HH:MM:SS\"));"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "start_date",
			"value": ""
		},
		{
			"key": "end_date",
			"value": ""
		},
		{
			"key": "endr_start_date",
			"value": ""
		}
	]
}